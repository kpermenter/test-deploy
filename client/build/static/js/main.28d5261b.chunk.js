(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{64:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(1),s=c(28),r=c.n(s),i=c(10),l=c(3),o=c(33),j=c(4),u=Object(a.createContext)(),b=function(e){var t=e.children,c=Object(a.useState)([]),s=Object(j.a)(c,2),r=s[0],i=s[1],l=Object(a.useState)(""),b=Object(j.a)(l,2),d=b[0],h=b[1];return Object(n.jsx)(u.Provider,{value:{restaurants:r,setRestaurants:i,addRestaurant:function(e){i([].concat(Object(o.a)(r),[e]))},deleteRestaurant:function(e){var t=r.filter((function(t){return t.id!==e}));i(t)},selectedRestaurant:d,setSelectedRestaurant:h},children:t})},d=c(29),h=c.n(d),O=c(30),x=c.n(O),m=h.a.create({baseURL:"https://desolate-eyrie-91630.herokuapp.com/api/v1/restaurants",timeout:5e3});x()(m,{retries:3});var p=m,f=function(){var e=Object(a.useContext)(u).addRestaurant,t=Object(a.useState)(""),c=Object(j.a)(t,2),s=c[0],r=c[1],i=Object(a.useState)(""),l=Object(j.a)(i,2),o=l[0],b=l[1],d=Object(a.useState)(1),h=Object(j.a)(d,2),O=h[0],x=h[1],m=0===s.trim().length||0===o.trim().length;return Object(n.jsx)("div",{className:"mb-4",children:Object(n.jsx)("form",{onSubmit:function(t){t.preventDefault(),p.post("/",{name:s,location:o,price_range:O}).then((function(t){e(t.data.data),r(""),x(0),b("")})).catch((function(e){console.log(e)}))},action:"",children:Object(n.jsxs)("div",{className:"form-row m-3",children:[Object(n.jsx)("div",{className:"col",children:Object(n.jsx)("input",{type:"text",value:s,className:"form-control",onChange:function(e){return r(e.target.value)},placeholder:"name"})}),Object(n.jsx)("div",{className:"col",children:Object(n.jsx)("input",{type:"text",value:o,className:"form-control",onChange:function(e){return b(e.target.value)},placeholder:"location"})}),Object(n.jsx)("div",{className:"col",children:Object(n.jsxs)("select",{className:"custom-select mr-sm-2",onChange:function(e){return x(e.target.value)},value:O,children:[Object(n.jsx)("option",{disabled:!0,children:"Price Range"}),Object(n.jsx)("option",{value:"1",children:"$"}),Object(n.jsx)("option",{value:"2",children:"$$"}),Object(n.jsx)("option",{value:"3",children:"$$$"}),Object(n.jsx)("option",{value:"4",children:"$$$$"}),Object(n.jsx)("option",{value:"5",children:"$$$$$"})]})}),Object(n.jsx)("button",{type:"submit",disabled:m,className:"col-auto btn btn-primary",children:"ADD"})]})})})},v=function(){return Object(n.jsx)("div",{children:Object(n.jsx)("h1",{className:"font-weight-light display-1 text-center",children:"Restaurant Finder"})})},g=c(65),N=(c(26),function(e){for(var t=e.rating,c=[],a=1;a<=5;a++)a<=t?c.push(Object(n.jsx)("i",{className:"text-warning fas fa-star"},a)):a!==Math.ceil(t)||Number.isInteger(t)?c.push(Object(n.jsx)("i",{className:"far fa-star"},a)):c.push(Object(n.jsx)("i",{className:"text-warning fas fa-star-half-alt"},a));return Object(n.jsx)(n.Fragment,{children:c})}),y=function(e){var t=Object(l.f)(),c=Object(a.useState)(!0),s=Object(j.a)(c,2),r=s[0],i=s[1],o=Object(a.useContext)(u),b=o.restaurants,d=o.setRestaurants,h=o.deleteRestaurant,O=function(e,t){return t?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(N,{rating:e}),Object(n.jsxs)("span",{className:"text-warning ml-1",children:["(",t,")"]})]}):Object(n.jsx)("span",{className:"text-warning",children:"0 review"})};return Object(a.useEffect)((function(){p.get("/").then((function(e){d(e.data.data)})).then((function(){i((function(e){return!e}))})).catch((function(e){console.log(e)}))}),[d]),r?Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)(g.a,{animation:"border",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(n.jsx)("div",{className:"table-responsive",children:Object(n.jsxs)("table",{className:"table table-striped table-hover table-dark",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"bg-primary",children:[Object(n.jsx)("th",{scope:"col",children:"Restaurant"}),Object(n.jsx)("th",{scope:"col",children:"Location"}),Object(n.jsx)("th",{scope:"col",children:"Price Range"}),Object(n.jsx)("th",{scope:"col",children:"Ratings"}),Object(n.jsx)("th",{scope:"col",children:"Edit"}),Object(n.jsx)("th",{scope:"col",children:"Delete"})]})}),Object(n.jsx)("tbody",{children:b.map((function(e){var c=e.id,a=e.name,s=e.location,r=e.price_range,i=e.count,l=e.average_rating;return Object(n.jsxs)("tr",{onClick:function(){return function(e){t.push("https://desolate-eyrie-91630.herokuapp.com/api/v1/restaurants/".concat(e))}(c)},children:[Object(n.jsx)("th",{scope:"row",children:a}),Object(n.jsx)("td",{children:s}),Object(n.jsx)("td",{children:"$".repeat(r)}),Object(n.jsx)("td",{children:O(l,i)}),Object(n.jsx)("td",{children:Object(n.jsx)("button",{onClick:function(e){return function(e,c){e.stopPropagation(),t.push("https://desolate-eyrie-91630.herokuapp.com/api/v1/restaurants/".concat(c,"/update"))}(e,c)},className:"btn btn-warning",children:"Update"})}),Object(n.jsx)("td",{children:Object(n.jsx)("button",{onClick:function(e){return function(e,t){e.stopPropagation(),p.delete("/".concat(t)).then((function(e){h(t)})).catch((function(e){console.log(e)}))}(e,c)},className:"btn btn-danger",children:"Delete"})})]},c)}))})]})})},w=function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(v,{}),Object(n.jsx)(f,{}),Object(n.jsx)(y,{})]})},R=function(){var e=Object(l.g)().id,t=Object(l.f)(),c=Object(a.useState)(""),s=Object(j.a)(c,2),r=s[0],i=s[1],o=Object(a.useState)(1),u=Object(j.a)(o,2),b=u[0],d=u[1],h=Object(a.useState)(""),O=Object(j.a)(h,2),x=O[0],m=O[1],f=0===r.trim().length||0===x.trim().length;return Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:function(c){c.preventDefault(),p.post("/".concat(e,"/addReview"),{name:r,rating:b,review:x}).then((function(e){i(""),d(0),m(""),t.push("/")})).catch((function(e){console.log(e)}))},children:[Object(n.jsxs)("div",{className:"form-row",children:[Object(n.jsxs)("div",{className:"form-group col-8",children:[Object(n.jsx)("label",{htmlFor:"name",children:"Name"}),Object(n.jsx)("input",{type:"text",value:r,onChange:function(e){return i(e.target.value)},className:"form-control"})]}),Object(n.jsxs)("div",{className:"form-group col-4",children:[Object(n.jsx)("label",{htmlFor:"rating",children:"Rating"}),Object(n.jsxs)("select",{onChange:function(e){return d(e.target.value)},value:b,name:"rating",id:"rating",className:"custom-select",children:[Object(n.jsx)("option",{disabled:!0,children:"Rating"}),Object(n.jsx)("option",{value:"1",children:"1"}),Object(n.jsx)("option",{value:"2",children:"2"}),Object(n.jsx)("option",{value:"3",children:"3"}),Object(n.jsx)("option",{value:"4",children:"4"}),Object(n.jsx)("option",{value:"5",children:"5"})]})]})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"review",children:"Review"}),Object(n.jsx)("textarea",{value:x,onChange:function(e){return m(e.target.value)},className:"form-control",rows:"5"})]}),Object(n.jsx)("button",{disabled:f,className:"btn btn-primary",children:"Submit"})]})})},S=function(e){var t=e.reviews.reviews;return Object(n.jsx)("div",{className:"row row-cols-3 mb-2",children:t.map((function(e){return Object(n.jsxs)("div",{className:"card text-white bg-primary mb-3 mr-3",style:{maxWidth:"15rem"},children:[Object(n.jsx)("div",{className:"card-header",children:e.name}),Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("h5",{className:"card-title",children:Object(n.jsx)(N,{rating:e.rating})}),Object(n.jsx)("p",{className:"card-text",children:e.review})]})]},e.id)}))})},C=function(){var e=Object(l.g)().id,t=Object(a.useState)(!0),c=Object(j.a)(t,2),s=c[0],r=c[1],i=Object(a.useContext)(u),o=i.selectedRestaurant,b=i.setSelectedRestaurant;return Object(a.useEffect)((function(){p.get("/".concat(e)).then((function(e){var t=e.data.data;b(t)})).then((function(){r((function(e){return!e}))})).catch((function(e){console.log(e)}))}),[b,e]),s?Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)(g.a,{animation:"border",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(n.jsx)("div",{children:o&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{className:"font-weight-light display-1 text-center",children:o.restaurant.name}),Object(n.jsxs)("div",{className:"text-center",children:[Object(n.jsx)(N,{rating:o.restaurant.average_rating}),Object(n.jsx)("span",{className:"text-warning ml-1",children:o.restaurant.count?"(".concat(Number(o.restaurant.count),")"):"(0)"})]}),Object(n.jsx)("div",{className:"mt-3",children:Object(n.jsx)(S,{reviews:o})}),Object(n.jsx)(R,{})]})})},$=function(){var e=Object(l.g)().id,t=Object(l.f)(),c=Object(a.useState)(""),s=Object(j.a)(c,2),r=s[0],i=s[1],o=Object(a.useState)(""),u=Object(j.a)(o,2),b=u[0],d=u[1],h=Object(a.useState)(1),O=Object(j.a)(h,2),x=O[0],m=O[1];Object(a.useEffect)((function(){p.get("/".concat(e)).then((function(e){var t=e.data.data.restaurant;i(t.name),d(t.location),m(t.price_range)})).catch((function(e){console.log(e)}))}),[e]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h1",{className:"font-weight-light display-2 text-center",children:["Update ",r]}),Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:function(c){c.preventDefault(),p.put("https://desolate-eyrie-91630.herokuapp.com/api/v1/restaurants/".concat(e),{name:r,location:b,price_range:x}).then((function(){t.push("/")})).catch((function(e){console.log(e)}))},action:"",children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"name",children:"Name"}),Object(n.jsx)("input",{value:r,onChange:function(e){return i(e.target.value)},type:"text",className:"form-control",id:"name"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"location",children:"Location"}),Object(n.jsx)("input",{type:"text",value:b,onChange:function(e){return d(e.target.value)},className:"form-control",id:"location"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"price_range",children:"Price Range"}),Object(n.jsx)("input",{type:"number",value:x,onChange:function(e){return m(e.target.value)},min:"1",max:"5",className:"form-control",id:"price_range"})]}),Object(n.jsx)("button",{className:"btn btn-primary",children:"Submit"})]})})]})},k=function(){return Object(n.jsx)("div",{children:Object(n.jsx)($,{})})},F=function(){return Object(n.jsx)(b,{children:Object(n.jsx)("div",{className:"container",children:Object(n.jsx)(i.a,{children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/",component:w}),Object(n.jsx)(l.a,{exact:!0,path:"https://desolate-eyrie-91630.herokuapp.com/api/v1/restaurants/:id/update",component:k}),Object(n.jsx)(l.a,{exact:!0,path:"https://desolate-eyrie-91630.herokuapp.com/api/v1/restaurants/:id",component:C})]})})})})};r.a.render(Object(n.jsx)(F,{}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.28d5261b.chunk.js.map