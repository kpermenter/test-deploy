(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{68:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(27),s=c.n(a),r=c(10),i=c(3),l=c(33),o=c(4),j=c(0),b=Object(n.createContext)(),u=function(e){var t=e.children,c=Object(n.useState)([]),a=Object(o.a)(c,2),s=a[0],r=a[1],i=Object(n.useState)(""),u=Object(o.a)(i,2),d=u[0],h=u[1];return Object(j.jsx)(b.Provider,{value:{restaurants:s,setRestaurants:r,addRestaurant:function(e){r([].concat(Object(l.a)(s),[e]))},deleteRestaurant:function(e){var t=s.filter((function(t){return t.id!==e}));r(t)},selectedRestaurant:d,setSelectedRestaurant:h},children:t})},d=c(28),h=c.n(d),O=c(34),x=h.a.create({baseURL:"https://desolate-eyrie-91630.herokuapp.com/api/v1/restaurants",timeout:5e3});Object(O.a)(x,{retries:3});var m=x,p=function(){var e=Object(n.useContext)(b).addRestaurant,t=Object(n.useState)(""),c=Object(o.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(""),i=Object(o.a)(r,2),l=i[0],u=i[1],d=Object(n.useState)(1),h=Object(o.a)(d,2),O=h[0],x=h[1],p=0===a.trim().length||0===l.trim().length;return Object(j.jsx)("div",{className:"mb-4",children:Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault(),m.post("/",{name:a,location:l,price_range:O}).then((function(t){e(t.data.data),s(""),x(0),u("")})).catch((function(e){console.log(e)}))},action:"",children:[Object(j.jsxs)("div",{className:"form-row m-3",children:[Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{type:"text",value:a,className:"form-control",onChange:function(e){return s(e.target.value)},placeholder:"name"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{type:"text",value:l,className:"form-control",onChange:function(e){return u(e.target.value)},placeholder:"location"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsxs)("select",{className:"custom-select mr-sm-2",onChange:function(e){return x(e.target.value)},value:O,children:[Object(j.jsx)("option",{disabled:!0,children:"Price Range"}),Object(j.jsx)("option",{value:"1",children:"$"}),Object(j.jsx)("option",{value:"2",children:"$$"}),Object(j.jsx)("option",{value:"3",children:"$$$"}),Object(j.jsx)("option",{value:"4",children:"$$$$"}),Object(j.jsx)("option",{value:"5",children:"$$$$$"})]})})]}),Object(j.jsx)("div",{style:{textAlign:"center",paddingTop:15},children:Object(j.jsx)("button",{type:"submit",disabled:p,className:"col-auto btn btn-sm btn-primary",style:{borderRadius:"40%"},children:Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"#ffc107",viewBox:"0 0 16 16",children:Object(j.jsx)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})})})})]})})},f=function(){return Object(j.jsxs)("div",{className:"pt-5",style:{color:"#343a40"},children:[Object(j.jsx)("h1",{className:"font-weight-bold display-4 text-center",children:"ATX Eats"}),Object(j.jsx)("h2",{className:"font-weight-bold display-5 text-center pb-3",children:"Eat. Review. Repeat. \ud83c\udf54"})]})},v=(c(26),function(e){for(var t=e.rating,c=[],n=1;n<=5;n++)n<=t?c.push(Object(j.jsx)("i",{className:"text-warning fas fa-star"},n)):n!==Math.ceil(t)||Number.isInteger(t)?c.push(Object(j.jsx)("i",{className:"far fa-star"},n)):c.push(Object(j.jsx)("i",{className:"text-warning fas fa-star-half-alt"},n));return Object(j.jsx)(j.Fragment,{children:c})}),g=function(e){var t=Object(i.f)(),c=Object(n.useState)(!0),a=Object(o.a)(c,2),s=a[0],r=a[1],l=Object(n.useContext)(b),u=l.restaurants,d=l.setRestaurants,h=l.deleteRestaurant,O=function(e,t){return t?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(v,{rating:e}),Object(j.jsxs)("span",{className:"text-warning ml-1",children:["(",t,")"]})]}):Object(j.jsx)("span",{className:"text-warning",children:"0 review"})};return Object(n.useEffect)((function(){m.get("/").then((function(e){d(e.data.data)})).then((function(){r((function(e){return!e}))})).catch((function(e){console.log(e)}))}),[d]),s?Object(j.jsx)("div",{className:"d-flex justify-content-center",style:{color:"red"},children:Object(j.jsx)("i",{class:"fas fa-hamburger fa-spin fa-5x"})}):Object(j.jsx)("div",{className:"table-responsive pt-2 pr-4 pl-4",children:Object(j.jsxs)("table",{className:"table table-striped table-hover table-dark",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{className:"bg-primary",children:[Object(j.jsx)("th",{scope:"col",children:"Restaurant"}),Object(j.jsx)("th",{scope:"col",children:"Location"}),Object(j.jsx)("th",{scope:"col",children:"Price Range"}),Object(j.jsx)("th",{scope:"col",children:"Ratings"}),Object(j.jsx)("th",{scope:"col",children:"Edit"}),Object(j.jsx)("th",{scope:"col",children:"Delete"})]})}),Object(j.jsx)("tbody",{children:u.map((function(e){var c=e.id,n=e.name,a=e.location,s=e.price_range,r=e.count,i=e.average_rating;return Object(j.jsxs)("tr",{onClick:function(){return function(e){t.push("/api/v1/restaurants/".concat(e))}(c)},children:[Object(j.jsx)("th",{scope:"row",children:n}),Object(j.jsx)("td",{children:a}),Object(j.jsx)("td",{children:"$".repeat(s)}),Object(j.jsx)("td",{children:O(i,r)}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(e){return function(e,c){e.stopPropagation(),t.push("/api/v1/restaurants/".concat(c,"/update"))}(e,c)},className:"btn btn-warning",children:"Update"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(e){return function(e,t){e.stopPropagation(),m.delete("/".concat(t)).then((function(e){h(t)})).catch((function(e){console.log(e)}))}(e,c)},className:"btn btn-danger",children:"Delete"})})]},c)}))})]})})},N=function(e){return Object(j.jsxs)("div",{style:{backgroundColor:"#ffc107"},children:[Object(j.jsx)(f,{}),Object(j.jsx)(p,{}),Object(j.jsx)(g,{})]})},w=function(){var e=Object(i.g)().id,t=Object(i.f)(),c=Object(n.useState)(""),a=Object(o.a)(c,2),s=a[0],r=a[1],l=Object(n.useState)(1),b=Object(o.a)(l,2),u=b[0],d=b[1],h=Object(n.useState)(""),O=Object(o.a)(h,2),x=O[0],p=O[1],f=0===s.trim().length||0===x.trim().length;return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:function(c){c.preventDefault(),m.post("/".concat(e,"/addReview"),{name:s,rating:u,review:x}).then((function(e){r(""),d(0),p(""),t.push("/")})).catch((function(e){console.log(e)}))},children:[Object(j.jsxs)("div",{className:"form-row",children:[Object(j.jsxs)("div",{className:"form-group col-8",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Name"}),Object(j.jsx)("input",{type:"text",value:s,onChange:function(e){return r(e.target.value)},className:"form-control"})]}),Object(j.jsxs)("div",{className:"form-group col-4",children:[Object(j.jsx)("label",{htmlFor:"rating",children:"Rating"}),Object(j.jsxs)("select",{onChange:function(e){return d(e.target.value)},value:u,name:"rating",id:"rating",className:"custom-select",children:[Object(j.jsx)("option",{disabled:!0,children:"Rating"}),Object(j.jsx)("option",{value:"1",children:"1"}),Object(j.jsx)("option",{value:"2",children:"2"}),Object(j.jsx)("option",{value:"3",children:"3"}),Object(j.jsx)("option",{value:"4",children:"4"}),Object(j.jsx)("option",{value:"5",children:"5"})]})]})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"review",children:"Review"}),Object(j.jsx)("textarea",{value:x,onChange:function(e){return p(e.target.value)},className:"form-control",rows:"5"})]}),Object(j.jsx)("button",{disabled:f,className:"btn btn-primary",children:"Submit"})]})})},y=function(e){var t=e.reviews.reviews;return Object(j.jsx)("div",{className:"row row-cols-3 mb-2",children:t.map((function(e){return Object(j.jsxs)("div",{className:"card text-white bg-primary mb-3 mr-3",style:{maxWidth:"15rem"},children:[Object(j.jsx)("div",{className:"card-header",children:e.name}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title",children:Object(j.jsx)(v,{rating:e.rating})}),Object(j.jsx)("p",{className:"card-text",children:e.review})]})]},e.id)}))})},R=c(69),S=function(){var e=Object(i.g)().id,t=Object(n.useState)(!0),c=Object(o.a)(t,2),a=c[0],s=c[1],r=Object(n.useContext)(b),l=r.selectedRestaurant,u=r.setSelectedRestaurant;return Object(n.useEffect)((function(){m.get("/".concat(e)).then((function(e){var t=e.data.data;u(t)})).then((function(){s((function(e){return!e}))})).catch((function(e){console.log(e)}))}),[u,e]),a?Object(j.jsx)("div",{className:"d-flex justify-content-center",children:Object(j.jsx)(R.a,{animation:"border",role:"status",children:Object(j.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(j.jsx)("div",{children:l&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{className:"font-weight-light display-1 text-center",children:l.restaurant.name}),Object(j.jsxs)("div",{className:"text-center",children:[Object(j.jsx)(v,{rating:l.restaurant.average_rating}),Object(j.jsx)("span",{className:"text-warning ml-1",children:l.restaurant.count?"(".concat(Number(l.restaurant.count),")"):"(0)"})]}),Object(j.jsx)("div",{className:"mt-3",children:Object(j.jsx)(y,{reviews:l})}),Object(j.jsx)(w,{})]})})},C=function(){var e=Object(i.g)().id,t=Object(i.f)(),c=Object(n.useState)(""),a=Object(o.a)(c,2),s=a[0],r=a[1],l=Object(n.useState)(""),b=Object(o.a)(l,2),u=b[0],d=b[1],h=Object(n.useState)(1),O=Object(o.a)(h,2),x=O[0],p=O[1];Object(n.useEffect)((function(){m.get("/".concat(e)).then((function(e){var t=e.data.data.restaurant;r(t.name),d(t.location),p(t.price_range)})).catch((function(e){console.log(e)}))}),[e]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("h1",{className:"font-weight-light display-2 text-center",children:["Update ",s]}),Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:function(c){c.preventDefault(),m.put("/api/v1/restaurants/".concat(e),{name:s,location:u,price_range:x}).then((function(){t.push("/")})).catch((function(e){console.log(e)}))},action:"",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Name"}),Object(j.jsx)("input",{value:s,onChange:function(e){return r(e.target.value)},type:"text",className:"form-control",id:"name"})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"location",children:"Location"}),Object(j.jsx)("input",{type:"text",value:u,onChange:function(e){return d(e.target.value)},className:"form-control",id:"location"})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"price_range",children:"Price Range"}),Object(j.jsx)("input",{type:"number",value:x,onChange:function(e){return p(e.target.value)},min:"1",max:"5",className:"form-control",id:"price_range"})]}),Object(j.jsx)("button",{className:"btn btn-primary",children:"Submit"})]})})]})},$=function(){return Object(j.jsx)("div",{children:Object(j.jsx)(C,{})})},k=function(){return Object(j.jsx)(u,{children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)(r.a,{children:Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{exact:!0,path:"/",component:N}),Object(j.jsx)(i.a,{exact:!0,path:"https://desolate-eyrie-91630.herokuapp.com/api/v1/restaurants/:id/update",component:$}),Object(j.jsx)(i.a,{exact:!0,path:"https://desolate-eyrie-91630.herokuapp.com/api/v1/restaurants/:id",component:S})]})})})})};s.a.render(Object(j.jsx)(k,{}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.1bb397f5.chunk.js.map